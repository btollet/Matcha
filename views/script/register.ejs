<script>
function register() {
    var formData = new FormData();
    formData.append("login", document.getElementById('login').value);
    formData.append("pass", document.getElementById('pass').value);
    formData.append("pass_confirm", document.getElementById('pass_confirm').value);
    formData.append("mail", document.getElementById('mail').value);
    var request = new XMLHttpRequest();
    request.onload = () => {
        if (request.readyState == 4 && request.status == 200) {
            let ret = (request.responseText);
            if (ret == 'ok')
            console.log('Ok');
            else
            console.log('Error:' + ret);
        }
    }
    request.open("POST", "/register");
    request.send(formData);
}

function login_check () {
    let login = document.getElementById('login');
    let div = document.getElementById('div_login');
    let error = document.getElementById('login_err');
    let error_mes = document.getElementById('login_err_mes');
    let formData = new FormData();
    formData.append("login", login.value);

    let request = new XMLHttpRequest();
    request.onload = () => {
        console.log('ok');
        if (request.readyState == 4 && request.status == 200) {
            let exist = (request.responseText);
            console.log(exist);
            if (login.value.length >= 3 && login.value.length <= 10 && exist == 'ok')
            {
                login.setAttribute('class', 'form-control form-control-success');
                div.setAttribute('class', 'form-group has-success');
                error.setAttribute('hidden', 'hidden');
                error_mes.setAttribute('hidden', 'hidden');
            }
            else
            {
                login.setAttribute('class', 'form-control form-control-danger');
                div.setAttribute('class', 'form-group has-danger');
                error.removeAttribute('hidden');
                if (exist == 'exist') {
                    error.innerHTML = 'Login non disponible';
                    error_mes.setAttribute('hidden', 'hidden');
                }
                else {
                    error_mes.removeAttribute('hidden');
                    if (login.value.length < 3)
                    error.innerHTML = 'Login trop court';
                    else
                    error.innerHTML = 'Login trop long';
                }
            }
        }
    }
    request.open("POST", "/login_check");
    request.send(formData);
}
</script>
